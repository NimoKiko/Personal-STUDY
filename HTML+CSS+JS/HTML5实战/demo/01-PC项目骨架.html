<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <!-- 分辨率范围：1200 ~ 2000 -->
    <style>
      /* css reset 开始*/
      html,
      body {
        height: 100%;
        overflow: hidden;
      }
      html,
      body,
      h1,
      h2,
      h3,
      h4,
      h5,
      h6,
      p,
      ul,
      li {
        margin: 0;
        padding: 0;
        font: 14px "微软雅黑";
      }
      a {
        text-decoration: none;
        display: block;
      }
      li {
        list-style: none;
      }
      img {
        display: block;
      }
      /* css reset 结束*/

      /* common css 开始 */
      .clearfix {
        zoom: 1;
      }
      .clearfix:after {
        content: "";
        display: block;
        clear: both;
      }
      /* common css 结束 */

      /* 头部样式 开始 */
      #head {
        width: 100%;
        background: white !important;
      }
      #head .headMain {
        /* border: 1px solid red; */
        width: 1100px;
        height: 80px;
        margin: 0px auto;
        position: relative;
      }
      #head .headMain > .logo > a > .logoImg {
        position: absolute;
        top: 15px;
        width: 100px;
        height: 100px;
        z-index: 2;
        /* border: 1px solid red; */
      }
      #head .headMain > .nav {
        float: right;
        margin-top: 50px;
      }
      #head .headMain > .nav > .list > li {
        float: left;
        margin-left: 40px;
        position: relative;
      }
      #head .headMain > .nav > .list > li .up {
        color: black;
        position: absolute;
        width: 0;
        overflow: hidden;
        transition: 1s width;
      }
      #head .headMain > .nav > .list > li:hover .up {
        /* width: 100%!important; */
        width: 100%;
      }
      #head .headMain > .arrow {
        width: 21px;
        height: 11px;
        position: absolute;
        left: 50%;
        bottom: -11px;
        transition: 1s all;
        z-index: 2;
      }
      #head .headMain > .arrow > img {
        width: 21px;
        height: 11px;
      }
      /* 头部样式 结束 */

      /* 内容区样式 开始 */
      #content {
        width: 100%;
        background: grey;
        position: relative;
        overflow: hidden;
      }
      #content .list {
        /* border: 1px solid red; */
        position: absolute;
        left: 0;
        top: 0;
        width: 100%;
        transition: 1s top;
      }
      #content .list > li {
        /* border: 1px solid red; */
        position: relative;
        background-position: 50% 50% !important;
      }
      #content .list > li > div {
        width: 1560px;
        height: 740px;
        background: rgba(14, 24, 72, 0.788);
        position: absolute;
        left: 0;
        right: 0;
        top: 0;
        bottom: 0;
        margin: auto;
      }
      #content .list > .home {
        background: url(./img/bg1.png) no-repeat;
      }
      #content .list > .Course {
        background: url(./img/bg2.png) no-repeat;
      }
      #content .list > .Works {
        background: url(./img/bg3.png) no-repeat;
      }
      #content .list > .About {
        background: url(./img/bg4.png) no-repeat;
      }
      #content .list > .Team {
        background: url(./img/bg5.png) no-repeat;
      }
      /* 内容区样式 结束 */
    </style>
  </head>
  <body>
    <section id="wrap">
      <!-- 流体布局 -->
      <header id="head">
        <!-- 固定布局 -->
        <div class="headMain">
          <h1 class="logo">
            <a href="javascript:;">
              <img class="logoImg" src="./img/logo.png" alt="" />
            </a>
          </h1>
          <nav class="nav">
            <ul class="list">
              <li>
                <a href="javascript:;">
                  <div class="up">
                    <img
                      style="width: 20px; height: 20px"
                      src="./img/home_black.png"
                      alt=""
                    />
                  </div>
                  <div class="down">
                    <img
                      style="width: 20px; height: 20px"
                      src="./img/home_blue.png"
                      alt=""
                    />
                  </div>
                </a>
              </li>
              <li>
                <a href="javascript:;">
                  <div class="up">Course</div>
                  <div class="down">Course</div>
                </a>
              </li>
              <li>
                <a href="javascript:;">
                  <div class="up">Works</div>
                  <div class="down">Works</div>
                </a>
              </li>
              <li>
                <a href="javascript:;">
                  <div class="up">About</div>
                  <div class="down">About</div>
                </a>
              </li>
              <li>
                <a href="javascript:;">
                  <div class="up">Team</div>
                  <div class="down">Team</div>
                </a>
              </li>
            </ul>
          </nav>
          <div class="arrow">
            <img src="./img//jiantou.png" alt="" />
          </div>
        </div>
      </header>
      <section id="content">
        <ul class="list">
          <li class="home">
            <div>home</div>
          </li>
          <li class="Course">
            <div>Course</div>
          </li>
          <li class="Works">
            <div>Works</div>
          </li>
          <li class="About">
            <div>About</div>
          </li>
          <li class="Team">
            <div>Team</div>
          </li>
        </ul>
      </section>
    </section>
  </body>
  <script>
    window.onload = function () {
      // 获取dom元素
      // 获取箭头的dom
      var arrow = document.querySelector("#head .headMain > .arrow");
      // 获取li的dom
      var liNodes = document.querySelectorAll(
        "#head .headMain > .nav > .list > li"
      );
      // 获取移到li上时的样式的dom
      var upNodes = document.querySelectorAll(
        "#head .headMain > .nav > .list > li .up"
      );
      // 获取第一个li节点
      var firstLiNode = liNodes[0];
      // 获取第一个up节点
      var firstUpNode = firstLiNode.querySelector(".up");
      // 获取头部节点
      var head = document.querySelector("#head");
      // 获取内容区节点
      var content = document.querySelector("#content");
      // 获取每一屏的内容区节点
      var cLiNodes = document.querySelectorAll("#content > .list > li");
      // 获取每一屏的节点
      var cList = document.querySelector("#content .list");
      // 同步当前屏的索引
      var now = 0;
      // 定时器
      var timer = 0;

      // 04-内容区交互——滚轮
      if (content.addEventListener) {
        content.addEventListener("DOMMouseScroll", (ev) => {
          ev = ev || event;
          clearTimeout(timer);
          timer = setTimeout(() => {
            fn(ev);
          }, 200);
        });
      }
      content.onmousewheel = function (ev) {
        ev = ev || event;
        clearTimeout(timer);
        timer = setTimeout(() => {
          fn(ev);
        }, 200);
      };
      function fn(ev) {
        // ev = ev || event;
        var dir = "";
        if (ev.wheelDelta) {
          dir = ev.wheelDelta > 0 ? "up" : "down";
        } else if (ev.detail) {
          dir = ev.wheelDelta < 0 ? "up" : "down";
        }
        switch (dir) {
          case "up":
            if (now > 0) {
              now--;
            }
            move(now);
            break;
          case "down":
            if (now < cLiNodes.length - 1) {
              now++;
              move(now);
            }

            break;
        }
      }

      // 03-调整分辨率时的适配
      window.onresize = function () {
        contentBind();
        cList.style.top =
          -now * (document.documentElement.clientHeight - head.offsetHeight) +
          "px";
        arrow.style.left =
          liNodes[now].offsetLeft +
          liNodes[now].offsetWidth / 2 -
          arrow.offsetWidth / 2 +
          "px";
      };

      contentBind();
      // 02-绑定内容区交互事件
      function contentBind() {
        content.style.height =
          document.documentElement.clientHeight - head.offsetHeight + "px";
        for (let i = 0; i < cLiNodes.length; i++) {
          cLiNodes[i].style.height =
            document.documentElement.clientHeight - head.offsetHeight + "px";
        }
      }

      headBind();
      // 01-绑定头部交互事件
      function headBind() {
        // 首屏打开时箭头移动到home标签下
        firstUpNode.style.width = "100%";
        arrow.style.left =
          firstLiNode.offsetLeft +
          firstLiNode.offsetWidth / 2 -
          arrow.offsetWidth / 2 +
          "px";
        // 设置点击标签时箭头的移动和标签样式的改变
        for (let i = 0; i < liNodes.length; i++) {
          liNodes[i].onclick = function () {
            move(i);
            now = i;
          };
        }
      }
      // 小箭头移动和图标样式变换函数
      function move(i) {
        for (let j = 0; j < upNodes.length; j++) {
          upNodes[j].style.width = "";
        }
        upNodes[i].style.width = "100%";
        arrow.style.left =
          liNodes[i].offsetLeft +
          liNodes[i].offsetWidth / 2 -
          arrow.offsetWidth / 2 +
          "px";
        cList.style.top =
          -i * (document.documentElement.clientHeight - head.offsetHeight) +
          "px";
        // console.log(cList.style.top);
      }
    };
  </script>
</html>
